<%- include('partials/_header.ejs', { pageTitle: 'Editar Perfil', user: user }) %>
    
    <h2 class="text-white mb-4">Editar Perfil</h2>

    <div class="card bg-dark border-secondary p-4" style="max-width: 600px;">
        <form action="/perfil/editar" method="POST">
            
            <% if (erro) { %>
                <div class="alert alert-danger text-center p-2 mb-3">
                    <%= erro %>
                </div>
            <% } %>

            <div class="mb-3">
                <label class="form-label text-light">Nome Completo</label>
                <input type="text" name="nome" class="form-control form-control-dark" value="<%= user.Nome %>" required>
            </div>

            <div class="mb-3">
                <label class="form-label text-light">E-mail</label>
                <input type="email" name="email" class="form-control form-control-dark" value="<%= user.Email %>" required>
            </div>

            <div class="mb-3">
                <label class="form-label text-light">Avatar (URL)</label>
                <input type="url" name="avatarUrl" class="form-control form-control-dark" value="<%= user.AvatarUrl %>">
            </div>

            <div class="mb-4">
                <label class="form-label text-light">Bio (Sobre mim)</label>
                <textarea name="bio" class="form-control form-control-dark" rows="4"><%= user.Perfil ? user.Perfil.Bio || '' : '' %></textarea>
            </div>

            <h5 class="text-warning border-bottom border-warning pb-2 mb-3">Alterar Senha</h5>

            <div class="mb-3">
                <label class="form-label text-light">Nova Senha</label>
                <input type="password" name="novaSenha" class="form-control form-control-dark" placeholder="Deixe em branco para não alterar">
                <span class="form-text text-secondary small">Mínimo de 8 caracteres.</span>
            </div>
            
            <div class="mb-4">
                <label class="form-label text-light">Confirmar Nova Senha</label>
                <input type="password" name="confirmaSenha" class="form-control form-control-dark" placeholder="Confirme sua nova senha">
            </div>
            
            <div class="d-flex justify-content-end">
                <a href="/perfil" class="btn btn-outline-secondary me-2">Cancelar</a>
                <button type="submit" class="btn btn-primary">Salvar Alterações</button>
            </div>
        </form>
    </div>

<%- include('partials/_footer.ejs') %>